{"version":3,"file":"static/js/505.2e430383.chunk.js","mappings":"sMAOA,MAwGA,EAxGcA,KACZ,MAAM,KAACC,EAAI,QAAEC,GAAYC,EAAAA,WAAiBC,EAAAA,IACnCC,EAAOC,IAAYC,EAAAA,EAAAA,UAAS,KAC5BC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,KAClCG,EAAOC,IAAYJ,EAAAA,EAAAA,UAAS,KAC5BK,EAASC,IAAcN,EAAAA,EAAAA,WAAS,GACjCO,GAAUC,EAAAA,EAAAA,MAwChB,OATAC,EAAAA,EAAAA,YAAU,KACRC,YAAW,KACRL,GACDE,EAAQI,KAAK,IACd,GACD,IAAK,GACL,CAACN,EAASE,KAIVK,EAAAA,EAAAA,MAAA,OAAKC,UAAU,SAAQC,SAAA,EACjBC,EAAAA,EAAAA,KAACC,EAAAA,GAAI,CAACC,GAAG,IAAGH,UACVC,EAAAA,EAAAA,KAAA,OAAKG,IAAI,oBACTC,IAAI,OAELd,IACEO,EAAAA,EAAAA,MAAA,OAAKP,QAASA,EAASQ,UAAU,gBAAeC,SAAA,EAC/CC,EAAAA,EAAAA,KAAA,OAAKG,IAAI,6BAA6BC,IAAK,MAC3CJ,EAAAA,EAAAA,KAAA,MAAAD,SAAI,mBAIZF,EAAAA,EAAAA,MAAA,QAAMQ,SAlDWC,UACnBC,EAAEC,iBAEF,MAAMC,EAAS,CACbC,OAAQ,CACN,eAAgB,qBAGpB,IACE,MAAM,KAAEC,SAAeC,IAAAA,KACrB,yDACA,CAAE7B,QAAOG,YACTuB,GAEF9B,EAAKkC,MAAQF,EAAKE,MAClBC,aAAaC,QAAQ,OAAOC,KAAKC,UAAUtC,IAC3CC,EAAQD,GACRY,GAAW,EACb,CAAE,MAAOH,GACHA,EAAM8B,UACR7B,EAASD,EAAM8B,SAASP,KAAKvB,OAE/BO,YAAW,KACRN,EAAS,GAAG,GACZ,IACP,GAyBkCS,UAAU,kBAAiBC,SAAA,EACvDC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,qCACHX,IAASY,EAAAA,EAAAA,KAAA,QAAMF,UAAU,iBAAgBC,SAAEX,KAC1CY,EAAAA,EAAAA,KAAA,QAAMF,UAAU,SAAQC,SAAC,YACzBC,EAAAA,EAAAA,KAAA,SACCF,UAAU,eACTqB,KAAK,QACLC,UAAQ,EACRC,GAAG,QACHC,SAAWf,GAAMvB,EAASuB,EAAEgB,OAAOC,OACnCA,MAAOzC,EACP0C,SAAU,KAEZ5B,EAAAA,EAAAA,MAAA,QAAMC,UAAU,iBAAgBC,SAAA,CAAC,WAAS,KACxCC,EAAAA,EAAAA,KAACC,EAAAA,GAAI,CAACH,UAAU,QAAQI,GAAG,kBAAiBH,SAAE,yBAIhDC,EAAAA,EAAAA,KAAA,SACEF,UAAU,eACVqB,KAAK,WACLC,UAAQ,EACRC,GAAG,WACHK,aAAa,OACbJ,SAAWf,GAAMpB,EAAYoB,EAAEgB,OAAOC,OACtCA,MAAOtC,EACPuC,SAAU,KAEdzB,EAAAA,EAAAA,KAAA,UAAQmB,KAAK,SAASrB,UAAU,cAAaC,SAAC,aAG7CC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,YAAWC,SAAC,qBAC5BC,EAAAA,EAAAA,KAACC,EAAAA,GAAI,CAACC,GAAG,YAAWH,UACnBC,EAAAA,EAAAA,KAAA,UAAQF,UAAU,mBAAkBC,SAAC,sCAQrC,C","sources":["components/Signin/Login.js"],"sourcesContent":["import React, { useEffect, useState, } from \"react\";\r\nimport { Link, useHistory } from \"react-router-dom\"\r\nimport axios from \"axios\";\r\nimport \"./Signin.css\";\r\nimport { UserContext } from \"../../context/user\";\r\n\r\n\r\nconst Login = () => {\r\n  const {user, setUser } = React.useContext(UserContext);\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const [success, setSuccees] = useState(false)\r\n  const history = useHistory()\r\n  \r\n\r\n  const loginHandler = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    const config = {\r\n      header: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    };\r\n    try {\r\n      const { data } = await axios.post(\r\n        \"https://audible-e-commerce.onrender.com/api/auth/login\",\r\n        { email, password },\r\n        config\r\n      );\r\n      user.token = data.token;\r\n      localStorage.setItem('user',JSON.stringify(user))\r\n      setUser(user)\r\n      setSuccees(true)\r\n    } catch (error) {\r\n      if (error.response) {\r\n        setError(error.response.data.error);\r\n      }\r\n      setTimeout(() => {\r\n         setError(\"\");\r\n      }, 5000);\r\n  }  \r\n  };\r\n\r\n  useEffect(()=>{\r\n    setTimeout(() => {\r\n    if(success){\r\n      history.push('/')\r\n     }  \r\n }, 3000);\r\n  },[success, history])\r\n  \r\n \r\n  return (\r\n    <div className=\"signin\">\r\n          <Link to='/'>\r\n            <img src='/audible/logo.png'\r\n            alt='' />\r\n          </Link>  \r\n          {success &&(   \r\n             <div success={success} className=\"login__loader\">\r\n              <img src='./audible/Glowing ring.gif' alt= ''></img>\r\n              <h4>Logging in</h4>\r\n             </div>      \r\n        \r\n        )}  \r\n      <form onSubmit={loginHandler} className=\"form__container\">\r\n        <h3>Sign in with your Amazon account</h3>\r\n        {error && <span className=\"error__message\">{error}</span>}\r\n          <span className='labels'>Email </span>\r\n          <input\r\n           className=\"input__field\"\r\n            type=\"email\"\r\n            required\r\n            id=\"email\"\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            value={email}\r\n            tabIndex={1}\r\n          />\r\n          <span className='signin__forgot'>Password{\" \"}\r\n            <Link className='links' to=\"/forgotpassword\" >\r\n              Forgot Password?\r\n            </Link>\r\n         </span> \r\n          <input\r\n            className=\"input__field\"\r\n            type=\"password\"\r\n            required\r\n            id=\"password\"\r\n            autoComplete=\"true\"\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            value={password}\r\n            tabIndex={2}\r\n          />\r\n        <button type=\"submit\" className=\"signin__btn\">\r\n          Sign In\r\n        </button>\r\n         <span className='new__sign'>New to Amazon? </span>\r\n         <Link to=\"/register\"> \r\n          <button className='signin__register'>\r\n          Create your amazon account\r\n          </button>\r\n        </Link>\r\n      \r\n        \r\n      </form>\r\n     \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"names":["Login","user","setUser","React","UserContext","email","setEmail","useState","password","setPassword","error","setError","success","setSuccees","history","useHistory","useEffect","setTimeout","push","_jsxs","className","children","_jsx","Link","to","src","alt","onSubmit","async","e","preventDefault","config","header","data","axios","token","localStorage","setItem","JSON","stringify","response","type","required","id","onChange","target","value","tabIndex","autoComplete"],"sourceRoot":""}